From b59f9ce7274ac7753690a2e8499c31b25dcb5d41 Mon Sep 17 00:00:00 2001
From: Jordan Santell <jsantell@gmail.com>
Date: Tue, 10 Jun 2014 15:42:00 -0700
Subject: [PATCH] Bug 994257 - Web Audio Editor is now responsive, supporting
 both landscape and portrait host views

---
 browser/devtools/webaudioeditor/webaudioeditor.xul |  4 +--
 .../themes/shared/devtools/webaudioeditor.inc.css  | 34 +++++++++++++++++-----
 2 files changed, 29 insertions(+), 9 deletions(-)

diff --git a/browser/devtools/webaudioeditor/webaudioeditor.xul b/browser/devtools/webaudioeditor/webaudioeditor.xul
index fca4fcc..c77d003 100644
--- a/browser/devtools/webaudioeditor/webaudioeditor.xul
+++ b/browser/devtools/webaudioeditor/webaudioeditor.xul
@@ -50,30 +50,30 @@
     <vbox id="content"
          flex="1"
          hidden="true">
       <toolbar id="web-audio-toolbar" class="devtools-toolbar">
         <spacer flex="1"></spacer>
         <toolbarbutton id="inspector-pane-toggle" class="devtools-toolbarbutton"
                        tabindex="0"/>
       </toolbar>
-      <splitter class="devtools-horizontal-splitter"/>
       <box id="web-audio-content-pane" flex="1">
         <hbox flex="1">
           <box id="web-audio-graph" class="devtools-responsive-container" flex="1">
             <vbox flex="1">
               <svg id="graph-svg" flex="1" viewBox="0 0 1000 500"
                   xmlns="http://www.w3.org/2000/svg"
                   xmlns:xlink="http://www.w3.org/1999/xlink">
                 <g id="graph-target" transform="translate(20,20)"/>
               </svg>
             </vbox>
           </box>
         </hbox>
-        <splitter class="devtools-side-splitter"/>
+        <splitter id="web-audio-splitter-landscape" class="devtools-horizontal-splitter"/>
+        <splitter id="web-audio-splitter-portrait" class="devtools-horizontal-splitter" orient="vertical" />
         <vbox id="web-audio-inspector" hidden="true">
           <hbox class="devtools-toolbar">
             <label id="web-audio-inspector-title" value="&webAudioEditorUI.inspectorTitle;"></label>
           </hbox>
           <deck id="web-audio-editor-details-pane" flex="1">
             <vbox id="web-audio-editor-details-pane-empty" flex="1">
               <label value="&webAudioEditorUI.inspectorEmpty;"></label>
             </vbox>
diff --git a/browser/themes/shared/devtools/webaudioeditor.inc.css b/browser/themes/shared/devtools/webaudioeditor.inc.css
index d5d98e9..9aebdf2 100644
--- a/browser/themes/shared/devtools/webaudioeditor.inc.css
+++ b/browser/themes/shared/devtools/webaudioeditor.inc.css
@@ -106,22 +106,16 @@ text {
 .web-audio-inspector .error {
   background-image: url(alerticon-warning.png);
   background-size: 13px 12px;
   -moz-appearance: none;
   opacity: 0;
   transition: opacity .5s ease-out 0s;
 }
 
-@media (min-resolution: 2dppx) {
-  .web-audio-inspector .error {
-    background-image: url(alerticon-warning@2x.png);
-  }
-}
-
 #inspector-pane-toggle {
   background: none;
   box-shadow: none;
   border: none;
   list-style-image: url(debugger-collapse.png);
   -moz-image-region: rect(0px,16px,16px,0px);
 }
 
@@ -146,9 +140,35 @@ text {
 
   #inspector-pane-toggle[pane-collapsed] {
     list-style-image: url(debugger-expand@2x.png);
   }
 
   #inspector-pane-toggle:active {
     -moz-image-region: rect(0px,64px,32px,32px);
   }
-}
\ No newline at end of file
+
+  .web-audio-inspector .error {
+    background-image: url(alerticon-warning@2x.png);
+  }
+}
+
+/* landscape mode */
+
+#web-audio-splitter-portrait {
+  display: none;
+}
+
+/* portrait mode */
+@media (max-width: 550px) {
+
+  #web-audio-content-pane {
+    -moz-box-orient: vertical;
+  }
+
+  #web-audio-splitter-portrait {
+    display: block;
+  }
+
+  #web-audio-splitter-landscape {
+    display: none;
+  }
+}
-- 
1.8.4.2

